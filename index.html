<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BO'NATURE EXPORT - Référentiel 2026</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        
        .timeline-line-center {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 0;
            bottom: 0;
            width: 4px;
            background-color: #E2E8F0;
            z-index: 0;
        }
        
        .custom-scroll::-webkit-scrollbar { width: 8px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ==========================================
        // DÉTECTEUR DE MOTS CLÉS (GLOSSAIRE)
        // ==========================================
        const glossaryAcronyms = ["EORI", "REX", "IPAFFS", "SPS", "EHC", "DDPP", "MRN", "GVMS", "GMR", "BCP", "BTOM", "EMEBI", "NSTI", "T1", "HACCP", "Delta IE", "DAE"];

        const TextWithGlossaryLinks = ({ text, onNavigate }) => {
            if (!text) return null;
            const regex = new RegExp(`\\b(${glossaryAcronyms.join('|')})\\b`, 'gi');
            const parts = text.split(regex);
            
            return (
                <>{parts.map((part, i) => {
                    const isTerm = glossaryAcronyms.find(t => t.toLowerCase() === part.toLowerCase());
                    if (isTerm && onNavigate) {
                        return (
                            <button key={i} onClick={(e) => { e.stopPropagation(); onNavigate(isTerm); }} 
                                className="inline-block text-purple-600 font-bold border-b-2 border-dotted border-purple-300 hover:text-purple-800 hover:border-purple-600 hover:bg-purple-50 transition-all px-1 rounded-sm cursor-pointer" 
                                title={`Voir la définition de ${isTerm}`}>
                                {part}
                            </button>
                        );
                    }
                    return <span key={i}>{part}</span>;
                })}</>
            );
        };

        // ==========================================
        // DONNÉES - UK (ROYAUME-UNI)
        // ==========================================
        const ukTimelineData = [
            {
                id: 0,
                type: "douane",
                category: "DOUANE & FISCAL",
                time: "PRÉALABLE (J-30)",
                title: "Enregistrement Opérateurs (EORI/REX)",
                actor: "Exportateur & Importateur",
                sender: "Entreprise",
                receiver: "Douane FR / HMRC",
                details: "Obtention des identifiants douaniers obligatoires pour interagir avec les systèmes UE et UK.",
                analysis: "Réglementation : Le code des douanes de l'Union (CDU) et le BTOM imposent une double immatriculation. L'exportateur français doit avoir un numéro EORI FR (basé sur le SIRET) et un numéro REX (Registered Exporter) pour certifier l'origine UE sur la facture, ce qui exempte l'importateur de droits de douane. L'importateur britannique DOIT avoir un EORI GB.",
                docs: ["EORI FR", "EORI GB", "Numéro REX"],
                warning: "Bloquant : Pas d'EORI GB = Impossible de dédouaner à l'arrivée. Pas de REX = Droits de douane applicables."
            },
            {
                id: 1,
                type: "sanitaire",
                category: "SPS (PRÉALABLE)",
                time: "J-3 (ANTICIPATION)",
                title: "Système IPAFFS",
                actor: "Exportateur / Importateur",
                sender: "Opérateur",
                receiver: "DEFRA (UK)",
                details: "Déclaration d'intention d'importation dans le système britannique unique.",
                analysis: "Depuis la pleine application du BTOM, l'importateur britannique doit obligatoirement utiliser le système IPAFFS pour pré-notifier l'arrivée de marchandises sanitaires ou phytosanitaires. C'est le point d'entrée unique de la DEFRA.",
                docs: ["Création compte IPAFFS"],
                warning: "Attention : La responsabilité de la saisie IPAFFS incombe à l'importateur britannique, mais l'exportateur doit fournir les informations exactes."
            },
            {
                id: 2,
                type: "sanitaire",
                category: "SPS (ANIMAUX)",
                time: "DÉPART (J-2)",
                title: "Certification Sanitaire (EHC)",
                actor: "Vétérinaire Officiel (DDPP)",
                sender: "DDPP",
                receiver: "Exportateur",
                details: "Inspection et émission du certificat sanitaire officiel pour les produits d'origine animale (Fromages, Viandes).",
                analysis: "Réglementation SPS : Pour les produits classés à risque moyen ou élevé par le BTOM, un vétérinaire officiel de la DDPP doit certifier la marchandise (EHC). Ce document atteste du respect des standards britanniques et doit être signé avant le départ.",
                docs: ["Certificat Sanitaire (EHC)", "Attestation NIMP 15 (Palettes)"],
                warning: "Bloquant : Pas de signature vétérinaire officielle (TRACES NT) = Refoulement immédiat à la frontière."
            },
            {
                id: 3,
                type: "sanitaire",
                category: "SPS (UK)",
                time: "J-1 (14h00)",
                title: "Pré-notification IPAFFS finale",
                actor: "Importateur UK",
                sender: "Importateur",
                receiver: "DEFRA (UK)",
                details: "Validation de la notification d'importation avec les documents définitifs.",
                analysis: "L'importateur doit finaliser sa notification au minimum 4h avant l'arrivée (flux RoRo) ou 24h avant pour le maritime. Il doit y joindre la version numérique du certificat sanitaire (EHC) signé en France.",
                docs: ["Réf. Notification IPAFFS complète"],
                warning: "Vigilance : Le poids net et les numéros de lot déclarés dans IPAFFS doivent correspondre exactement au Certificat EHC."
            },
            {
                id: 4,
                type: "douane",
                category: "DOUANE",
                time: "J-1 (16h00)",
                title: "Déclarations Douane (Export/Import)",
                actor: "Déclarant (RDE)",
                sender: "RDE",
                receiver: "Delta IE / CDS",
                details: "Dépôt des déclarations fiscales de sortie (France) et d'entrée (Royaume-Uni).",
                analysis: "Flux 'Pre-lodged' : La frontière intelligente exige que les déclarations soient validées AVANT l'arrivée du camion au port. L'export se fait via le système français Delta IE (générant un MRN Export) et l'import via le système britannique CDS (MRN Import).",
                docs: ["MRN Export (FR)", "MRN Import (UK)"],
                warning: "Bloquant : L'absence de MRN empêche la création des enveloppes logistiques de traversée."
            },
            {
                id: 5,
                type: "transport",
                category: "FRONTIÈRE INTELLIGENTE",
                time: "DÉPART (H-4)",
                title: "Enveloppe Logistique (ELO/GMR)",
                actor: "Transporteur",
                sender: "Chauffeur",
                receiver: "Ferry / Tunnel",
                details: "Appairage des données douanières avec la plaque d'immatriculation du camion.",
                analysis: "Smart Border : L'ère du papier au guichet est révolue. Le système britannique GVMS génère un GMR qui consolide les déclarations d'importation. Le chauffeur présente ces codes-barres pour avoir le droit d'embarquer sur le ferry ou le Shuttle.",
                docs: ["Code-barres ELO (FR)", "GMR (UK)"],
                warning: "Logistique : Le transporteur sera refusé à l'embarquement sans ces codes valides."
            },
            {
                id: 6,
                type: "transport",
                category: "CONTRÔLE",
                time: "ARRIVÉE (H+1)",
                title: "Analyse de Risque & BCP",
                actor: "Douane UK / DEFRA",
                sender: "Système GVMS",
                receiver: "Chauffeur",
                details: "Statut délivré pendant la traversée maritime ou ferroviaire : Libéré ou Contrôle BCP.",
                analysis: "Processus BTOM : Pendant la traversée, l'algorithme britannique cible les camions. Si le système indique un contrôle sanitaire ou douanier, le camion a l'obligation légale de se rendre au BCP (Border Control Post) à l'arrivée (ex: Sevington).",
                docs: ["Statut Sortie (Écran de bord du chauffeur)"],
                warning: "Pénal : Ne pas se rendre à un BCP alors que le GMR l'exige constitue une infraction grave menant à des sanctions financières."
            }
        ];

        const ukBtomLevels = [
            {
                level: "Risque Faible (Low Risk)",
                icon: "fa-seedling",
                color: "green",
                products: "Produits transformés, Conserves, Pâtes, Biscuits.",
                requirements: ["Facture Commerciale avec mention REX", "Pas de Certificat Sanitaire (EHC)", "Exemption IPAFFS (le plus souvent)"],
                change: "Avantage : Logistique fluide et formalités réduites pour l'épicerie."
            },
            {
                level: "Risque Moyen (Medium Risk)",
                icon: "fa-cheese",
                color: "yellow",
                products: "Viandes fraîches, Fromages au lait cru, Charcuterie.",
                requirements: ["Certificat Sanitaire (EHC) officiel obligatoire", "Pré-notification IPAFFS par l'importateur", "Contrôles physiques au BCP (1 à 30%)"],
                change: "Contrainte : Coûts vétérinaires (DDPP) et délais supplémentaires."
            },
            {
                level: "Risque Élevé (High Risk)",
                icon: "fa-cow",
                color: "red",
                products: "Animaux vivants, Végétaux destinés à la plantation.",
                requirements: ["Certificat Sanitaire Intégral", "Notification IPAFFS stricte", "Contrôle physique au BCP systématique (100%)"],
                change: "Critique : Exige une chaîne logistique hautement spécialisée."
            }
        ];

        // ==========================================
        // DONNÉES - MARCHÉ UNIQUE & EUROPE
        // ==========================================
        const europeData = [
            {
                id: 0,
                type: "ue",
                category: "UNION DOUANIÈRE (UE)",
                title: "Vente Intracommunautaire (Le Marché Unique)",
                details: "Livrer en Allemagne, Italie ou Espagne est administrativement similaire à une livraison nationale.",
                analysis: "Le Marché Unique et l'Union Douanière impliquent l'absence totale de droits de douane et de frontières physiques entre les 27 pays membres. De plus, le principe de reconnaissance mutuelle garantit que les normes sanitaires françaises (Paquet Hygiène, HACCP) sont valables dans toute l'UE sans contrôles supplémentaires.",
                docs: ["Facture avec mention de la TVA intracommunautaire", "CMR (Lettre de voiture)"],
                warning: "Attention à la conformité de l'étiquetage (il doit être dans la langue du pays de destination) et à la gestion de la TVA.",
                icon: "fa-flag-eu"
            },
            {
                id: 1,
                type: "ue",
                category: "ADMINISTRATIF (UE)",
                title: "Déclaration Statistique (EMEBI)",
                details: "L'unique obligation déclarative pour le suivi des échanges intra-UE.",
                analysis: "Bien qu'il n'y ait pas de douane, l'État a besoin de statistiques. Les entreprises dépassant le seuil d'expédition (actuellement 460 000 €/an en France) doivent soumettre mensuellement l'EMEBI (État Récapitulatif Mensuel des Échanges de Biens Intra-UE, ex-DEB), ainsi qu'un état récapitulatif TVA pour l'administration fiscale.",
                docs: ["Déclaration EMEBI mensuelle (portail douane.gouv.fr)"],
                warning: "Uniquement obligatoire si les seuils de chiffre d'affaires annuels sont franchis.",
                icon: "fa-file-invoice"
            },
            {
                id: 2,
                type: "hors-ue",
                category: "AELE & PAYS TIERS EUROPÉENS",
                title: "Le piège Suisse, Norvège, Islande",
                details: "Ces pays appliquent la libre circulation des personnes (Schengen) mais SONT EXCLUS de l'Union Douanière pour les marchandises.",
                analysis: "C'est l'erreur classique du débutant à l'export. On peut passer la frontière suisse avec sa carte d'identité sans s'arrêter, mais un camion de marchandises (fret) y est strictement interdit sans formalités. Toute exportation vers la Suisse ou la Norvège nécessite un dédouanement complet (DAE) et le paiement de droits de douane (souvent calculés au poids brut en Suisse).",
                docs: ["Facture Export (Hors Taxes)", "Déclaration d'Exportation (Delta IE)"],
                warning: "Ces pays sont des Pays Tiers. Le processus douanier est quasi-similaire à une expédition vers l'Asie ou les USA.",
                icon: "fa-mountain"
            },
            {
                id: 3,
                type: "hors-ue",
                category: "TRANSIT LOGISTIQUE",
                title: "Régime de Transit (NSTI / T1)",
                details: "Procédure permettant de traverser un pays tiers (ex: la Suisse) sans y payer les taxes.",
                analysis: "Si vous expédiez une marchandise depuis la France vers l'Italie (UE à UE), mais que le camion traverse la Suisse (Pays Tiers), il faut suspendre les droits de douane. L'exportateur ou le transporteur émet un document T1 via le système NSTI. Le camion traverse la Suisse sous douane et 'apure' son T1 en rentrant en Italie.",
                docs: ["Document de Transit T1 (avec MRN)"],
                warning: "L'émission d'un T1 nécessite une garantie financière bloquée en douane. On passe généralement par un commissionnaire en douane (RDE).",
                icon: "fa-truck-fast"
            }
        ];

        // ==========================================
        // DONNÉES - COMPARATIF / STRATÉGIE
        // ==========================================
        const strategyData = [
            {
                zone: "Marché Unique (Union Européenne)",
                countries: "Allemagne, Italie, Espagne, Benelux...",
                difficulty: "Faible",
                cost: "Faible",
                time: "Fluide (J+1 / J+2)",
                details: "Extension naturelle du marché domestique sans friction douanière.",
                pros: ["Aucune formalité douanière", "Harmonisation sanitaire stricte (HACCP)", "Coûts logistiques maîtrisés", "Pas de risque de blocage aux frontières"],
                cons: ["Concurrence européenne très intense", "Nécessité absolue d'adapter l'étiquetage et le packaging (langues)"],
                color: "green"
            },
            {
                zone: "Pays Tiers Européens (AELE)",
                countries: "Suisse, Norvège, Islande",
                difficulty: "Modérée",
                cost: "Moyen",
                time: "Moyen (Arrêt obligatoire en douane)",
                details: "Marché limitrophe à fort potentiel mais protégé par des barrières tarifaires.",
                pros: ["Pouvoir d'achat très attractif", "Forte appétence pour l'épicerie fine et le terroir français", "Proximité limitant les coûts de transport"],
                cons: ["Dédouanement obligatoire (DAE, T1)", "Droits de douane applicables impactant le prix de vente final"],
                color: "yellow"
            },
            {
                zone: "Grand Export / Post-Brexit (BTOM)",
                countries: "Royaume-Uni",
                difficulty: "Élevée",
                cost: "Élevé",
                time: "Lent & Incertain",
                details: "Marché devenu complexe exigeant une solide infrastructure administrative et logistique.",
                pros: ["Volume de marché très important", "Demande historique et constante pour la gastronomie française"],
                cons: ["Coûts fixes vétérinaires (SPS) rédhibitoires pour les petits envois", "Risque d'inspection physique (BCP)", "Charge administrative quotidienne lourde (IPAFFS)"],
                color: "red"
            }
        ];

        // ==========================================
        // DONNÉES - GLOSSAIRE
        // ==========================================
        const glossaryData = [
            { term: "EORI", fullName: "Economic Operators Registration and Identification", category: "Douane", definition: "Numéro d'immatriculation douanière unique attribué aux entreprises. Indispensable pour toute opération d'import/export hors de l'UE.", icon: "fa-id-card", color: "blue" },
            { term: "REX", fullName: "Registered Exporter System", category: "Douane", definition: "Statut permettant à un exportateur d'auto-certifier l'origine préférentielle de ses marchandises sur la facture, permettant à son client d'être exonéré de droits de douane.", icon: "fa-file-signature", color: "blue" },
            { term: "IPAFFS", fullName: "Import of Products, Animals, Food and Feed System", category: "Sanitaire", definition: "Système informatique britannique obligatoire pour pré-notifier l'arrivée de produits d'origine animale ou végétale au Royaume-Uni.", icon: "fa-desktop", color: "green" },
            { term: "SPS", fullName: "Sanitaire et Phytosanitaire", category: "Réglementation", definition: "Ensemble des règles et contrôles visant à protéger la santé humaine, animale et végétale lors des échanges internationaux.", icon: "fa-shield-halved", color: "red" },
            { term: "EHC", fullName: "Export Health Certificate", category: "Sanitaire", definition: "Certificat sanitaire officiel délivré et signé par un vétérinaire de l'État (DDPP) pour autoriser l'exportation de produits animaux vers des pays tiers.", icon: "fa-notes-medical", color: "green" },
            { term: "DDPP", fullName: "Direction Départementale de la Protection des Populations", category: "Institution", definition: "Service de l'État français (incluant les services vétérinaires) chargé d'inspecter et de délivrer les certificats sanitaires pour l'exportation.", icon: "fa-building-shield", color: "slate" },
            { term: "MRN", fullName: "Movement Reference Number", category: "Douane", definition: "Numéro de suivi douanier unique (souvent sous forme de code-barres) prouvant qu'une déclaration a été validée par les autorités.", icon: "fa-barcode", color: "blue" },
            { term: "GVMS", fullName: "Goods Vehicle Movement Service", category: "Transport", definition: "Système informatique douanier du Royaume-Uni gérant les flux logistiques aux frontières intelligentes.", icon: "fa-server", color: "amber" },
            { term: "GMR", fullName: "Goods Movement Reference", category: "Transport", definition: "Code-barres unique généré par le GVMS regroupant toutes les déclarations d'un camion. Sésame obligatoire pour embarquer sur le ferry/tunnel.", icon: "fa-truck-fast", color: "amber" },
            { term: "BCP", fullName: "Border Control Post", category: "Contrôle", definition: "Poste de Contrôle Frontalier britannique (ex: Sevington) où les camions sont déviés pour des inspections documentaires et physiques.", icon: "fa-magnifying-glass-location", color: "red" },
            { term: "BTOM", fullName: "Border Target Operating Model", category: "Réglementation", definition: "Le nouveau modèle douanier et sanitaire post-Brexit en vigueur au UK, qui classe les produits alimentaires selon 3 niveaux de risque.", icon: "fa-scale-balanced", color: "slate" },
            { term: "EMEBI", fullName: "État Récapitulatif Mensuel des Échanges de Biens Intra-UE", category: "Fiscalité", definition: "Déclaration statistique obligatoire (qui a remplacé la DEB) à fournir aux douanes françaises pour le suivi des expéditions au sein de l'Union Européenne.", icon: "fa-chart-pie", color: "blue" },
            { term: "NSTI", fullName: "Nouveau Système de Transit Informatisé", category: "Douane", definition: "Système informatique européen permettant la gestion et le suivi des déclarations de transit douanier.", icon: "fa-network-wired", color: "blue" },
            { term: "T1", fullName: "Document de Transit Externe", category: "Transport", definition: "Régime douanier permettant à une marchandise de traverser un territoire (ou d'y circuler avant dédouanement) en suspendant le paiement des droits et taxes.", icon: "fa-route", color: "amber" },
            { term: "HACCP", fullName: "Hazard Analysis Critical Control Point", category: "Réglementation", definition: "Méthode de maîtrise de la sécurité sanitaire des denrées alimentaires, socle de la réglementation européenne (Paquet Hygiène).", icon: "fa-hand-sparkles", color: "green" },
            { term: "Delta IE", fullName: "Delta Import-Export", category: "Douane", definition: "Le nouveau système informatique des douanes françaises pour le dédouanement (remplaçant l'ancien système Delta G).", icon: "fa-laptop-code", color: "blue" },
            { term: "DAE", fullName: "Document d'Accompagnement Export", category: "Douane", definition: "Document prouvant que la marchandise a bien été déclarée en douane pour quitter le territoire de l'Union Européenne.", icon: "fa-file-export", color: "blue" }
        ];

        // ==========================================
        // COMPOSANTS COMMUNS
        // ==========================================
        
        const Navigation = ({ activeTab, setTab }) => (
            <div className="bg-white shadow-sm sticky top-0 z-40 border-b border-slate-200">
                <div className="max-w-6xl mx-auto px-4">
                    <div className="flex space-x-1 md:space-x-8 overflow-x-auto custom-scroll">
                        <button onClick={() => setTab('home')} className={`py-4 px-2 border-b-2 font-medium text-sm transition-colors flex items-center gap-2 whitespace-nowrap ${activeTab === 'home' ? 'border-blue-600 text-blue-600' : 'border-transparent text-slate-500 hover:text-slate-700'}`}>
                            <i className="fa-solid fa-house"></i> Accueil
                        </button>
                        <button onClick={() => setTab('europe')} className={`py-4 px-2 border-b-2 font-medium text-sm transition-colors flex items-center gap-2 whitespace-nowrap ${activeTab === 'europe' ? 'border-blue-600 text-blue-600' : 'border-transparent text-slate-500 hover:text-slate-700'}`}>
                            <i className="fa-solid fa-circle-nodes"></i> Marché Unique & UE
                        </button>
                        <button onClick={() => setTab('uk')} className={`py-4 px-2 border-b-2 font-medium text-sm transition-colors flex items-center gap-2 whitespace-nowrap ${activeTab === 'uk' ? 'border-blue-600 text-blue-600' : 'border-transparent text-slate-500 hover:text-slate-700'}`}>
                            <i className="fa-solid fa-flag-checkered"></i> Royaume-Uni (BTOM)
                        </button>
                        <button onClick={() => setTab('strategy')} className={`py-4 px-2 border-b-2 font-medium text-sm transition-colors flex items-center gap-2 whitespace-nowrap ${activeTab === 'strategy' ? 'border-amber-500 text-amber-600' : 'border-transparent text-slate-500 hover:text-slate-700'}`}>
                            <i className="fa-solid fa-scale-balanced"></i> Synthèse Stratégique
                        </button>
                        <button onClick={() => setTab('glossary', true)} className={`py-4 px-2 border-b-2 font-medium text-sm transition-colors flex items-center gap-2 whitespace-nowrap ${activeTab === 'glossary' ? 'border-purple-600 text-purple-600' : 'border-transparent text-slate-500 hover:text-slate-700'}`}>
                            <i className="fa-solid fa-book-open"></i> Glossaire
                        </button>
                    </div>
                </div>
            </div>
        );

        const Modal = ({ data, onClose, onNavigateGlossary }) => {
            if (!data) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm fade-in" onClick={onClose}>
                    <div className="bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden flex flex-col max-h-[90vh]" onClick={e => e.stopPropagation()}>
                        <div className="bg-slate-900 p-8 text-white relative flex-shrink-0">
                            <div className="absolute top-0 right-0 p-32 bg-blue-600 rounded-full blur-3xl opacity-20 -mr-16 -mt-16"></div>
                            <button onClick={onClose} className="absolute top-6 right-6 text-slate-400 hover:text-white transition-colors bg-white/10 hover:bg-white/20 rounded-full w-8 h-8 flex items-center justify-center">
                                <i className="fa-solid fa-xmark text-lg"></i>
                            </button>
                            <div className="relative z-10">
                                <div className="flex items-center gap-3 mb-3">
                                    <span className="bg-blue-600 px-3 py-1 rounded-full text-xs font-bold tracking-wider shadow-sm">{data.time || "FOCUS RÉGLEMENTAIRE"}</span>
                                    <span className="text-slate-300 text-xs font-bold uppercase tracking-wider">{data.category}</span>
                                </div>
                                <h2 className="text-3xl font-bold mb-2">
                                    <TextWithGlossaryLinks text={data.title} onNavigate={onNavigateGlossary} />
                                </h2>
                                <p className="text-slate-300 text-sm">
                                    <TextWithGlossaryLinks text={data.details} onNavigate={onNavigateGlossary} />
                                </p>
                            </div>
                        </div>
                        <div className="p-8 overflow-y-auto custom-scroll bg-slate-50 flex-grow">
                            {data.sender && (
                                <div className="flex items-center justify-between bg-white p-5 rounded-xl border border-slate-200 shadow-sm mb-8">
                                    <div className="text-center w-1/3">
                                        <div className="text-[10px] text-slate-400 font-bold uppercase mb-1">Émetteur</div>
                                        <div className="text-sm font-bold text-slate-800">
                                            <TextWithGlossaryLinks text={data.sender} onNavigate={onNavigateGlossary} />
                                        </div>
                                    </div>
                                    <div className="flex-1 flex justify-center text-slate-300">
                                        <i className="fa-solid fa-arrow-right-long text-xl"></i>
                                    </div>
                                    <div className="text-center w-1/3">
                                        <div className="text-[10px] text-slate-400 font-bold uppercase mb-1">Destinataire</div>
                                        <div className="text-sm font-bold text-blue-600">
                                            <TextWithGlossaryLinks text={data.receiver} onNavigate={onNavigateGlossary} />
                                        </div>
                                    </div>
                                </div>
                            )}
                            <div className="grid md:grid-cols-2 gap-8 mb-8">
                                <div>
                                    <h3 className="text-sm font-bold text-slate-800 mb-3 flex items-center">
                                        <i className="fa-solid fa-magnifying-glass text-blue-600 mr-2"></i> Analyse Réglementaire
                                    </h3>
                                    <p className="text-sm text-slate-600 leading-relaxed text-justify">
                                        <TextWithGlossaryLinks text={data.analysis} onNavigate={onNavigateGlossary} />
                                    </p>
                                </div>
                                <div>
                                    <h3 className="text-sm font-bold text-slate-800 mb-3">Documents Requis</h3>
                                    <ul className="space-y-2">
                                        {data.docs.map((doc, i) => (
                                            <li key={i} className="flex items-center gap-2 p-2 bg-white rounded border border-slate-200 text-sm shadow-sm">
                                                <i className="fa-solid fa-file-contract text-blue-500"></i>
                                                <span className="font-medium text-slate-700">
                                                    <TextWithGlossaryLinks text={doc} onNavigate={onNavigateGlossary} />
                                                </span>
                                            </li>
                                        ))}
                                    </ul>
                                </div>
                            </div>
                            {data.warning && (
                                <div className="bg-amber-50 border-l-4 border-amber-500 p-5 rounded-r-xl flex items-start gap-4">
                                    <div className="bg-amber-100 text-amber-600 w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i className="fa-solid fa-triangle-exclamation text-lg"></i>
                                    </div>
                                    <div>
                                        <h4 className="font-bold text-amber-900 text-sm uppercase tracking-wide mb-1">Point de Vigilance</h4>
                                        <p className="text-sm text-amber-800 leading-snug">
                                            <TextWithGlossaryLinks text={data.warning} onNavigate={onNavigateGlossary} />
                                        </p>
                                    </div>
                                </div>
                            )}
                        </div>
                        <div className="bg-white p-4 border-t border-slate-200 text-center">
                            <button onClick={onClose} className="px-8 py-2 bg-slate-100 text-slate-600 font-bold rounded-full hover:bg-slate-200 transition-colors text-sm">Fermer</button>
                        </div>
                    </div>
                </div>
            );
        };

        // --- PAGE 0: HOME ---
        const HomePage = ({ setTab }) => (
            <div className="animate-fade-in flex-1 bg-slate-50">
                <div className="relative bg-slate-900 overflow-hidden">
                    <div className="absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-blue-900 via-slate-900 to-black opacity-80"></div>
                    <div className="relative max-w-5xl mx-auto px-4 py-24 text-center">
                        <div className="inline-block mb-6 px-4 py-1.5 rounded-full bg-white/10 border border-white/20 text-blue-200 text-sm font-semibold backdrop-blur-sm">
                            Mission de Conseil - Analyse Réglementaire 2026
                        </div>
                        <h1 className="text-4xl md:text-6xl font-bold text-white mb-6 leading-tight">
                            Stratégie Export Agroalimentaire<br/>
                            <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400">UE vs Royaume-Uni</span>
                        </h1>
                        <p className="text-slate-300 text-xl max-w-2xl mx-auto mb-10 leading-relaxed">
                            Outil d'aide à la décision conçu pour la startup Bo'Nature : cartographie des exigences douanières, sanitaires et logistiques entre le Marché Unique et le Royaume-Uni post-Brexit.
                        </p>
                        <button onClick={() => setTab('strategy')} className="bg-blue-600 hover:bg-blue-500 text-white px-8 py-4 rounded-full font-bold shadow-lg shadow-blue-500/30 transition-all transform hover:-translate-y-1">
                            Voir la synthèse comparative
                        </button>
                    </div>
                </div>
                
                <div className="max-w-6xl mx-auto px-4 py-20 -mt-16 relative z-10">
                    <div className="grid md:grid-cols-3 gap-8">
                        
                        <div onClick={() => setTab('europe')} className="bg-white p-8 rounded-2xl shadow-xl border border-slate-100 hover:shadow-2xl transition-all cursor-pointer group hover:-translate-y-2">
                            <div className="w-16 h-16 bg-emerald-50 rounded-2xl flex items-center justify-center text-3xl text-emerald-600 mb-6 group-hover:bg-emerald-600 group-hover:text-white transition-colors">
                                <i className="fa-solid fa-circle-nodes"></i>
                            </div>
                            <h3 className="text-2xl font-bold text-slate-800 mb-3">Marché Unique & Europe</h3>
                            <p className="text-slate-500 leading-relaxed mb-6">
                                Comprendre l'Union Douanière européenne et déjouer le piège réglementaire des pays de l'AELE (Suisse, Norvège).
                            </p>
                            <span className="text-emerald-600 font-bold flex items-center gap-2 group-hover:gap-3 transition-all">
                                Explorer la zone UE <i className="fa-solid fa-arrow-right"></i>
                            </span>
                        </div>

                        <div onClick={() => setTab('uk')} className="bg-white p-8 rounded-2xl shadow-xl border border-slate-100 hover:shadow-2xl transition-all cursor-pointer group hover:-translate-y-2">
                            <div className="w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center text-3xl text-blue-600 mb-6 group-hover:bg-blue-600 group-hover:text-white transition-colors">
                                <i className="fa-solid fa-flag-checkered"></i>
                            </div>
                            <h3 className="text-2xl font-bold text-slate-800 mb-3">Royaume-Uni (BTOM)</h3>
                            <p className="text-slate-500 leading-relaxed mb-6">
                                Analyse pas-à-pas du séquençage douanier et sanitaire britannique : IPAFFS, certificats EHC et contrôles aux frontières intelligentes.
                            </p>
                            <span className="text-blue-600 font-bold flex items-center gap-2 group-hover:gap-3 transition-all">
                                Analyser le processus UK <i className="fa-solid fa-arrow-right"></i>
                            </span>
                        </div>
                        
                        <div onClick={() => setTab('strategy')} className="bg-white p-8 rounded-2xl shadow-xl border border-slate-100 hover:shadow-2xl transition-all cursor-pointer group hover:-translate-y-2">
                            <div className="w-16 h-16 bg-amber-50 rounded-2xl flex items-center justify-center text-3xl text-amber-500 mb-6 group-hover:bg-amber-500 group-hover:text-white transition-colors">
                                <i className="fa-solid fa-scale-balanced"></i>
                            </div>
                            <h3 className="text-2xl font-bold text-slate-800 mb-3">Synthèse Stratégique</h3>
                            <p className="text-slate-500 leading-relaxed mb-6">
                                Matrice de décision comparant la complexité administrative, les coûts et préconisations pour le développement commercial.
                            </p>
                            <span className="text-amber-500 font-bold flex items-center gap-2 group-hover:gap-3 transition-all">
                                Consulter la synthèse <i className="fa-solid fa-arrow-right"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        );

        // --- PAGE 1: UK ---
        const UKPage = ({ setSelectedStep, onNavigateGlossary }) => {
            const [filter, setFilter] = useState('all');
            const [mounted, setMounted] = useState(false);
            
            useEffect(() => {
                const timer = setTimeout(() => setMounted(true), 300);
                return () => clearTimeout(timer);
            }, []);

            const filteredData = ukTimelineData.filter(item => {
                if (filter === 'all') return true;
                return item.type === filter;
            });

            const FilterBar = () => (
                <div className="flex flex-wrap justify-center gap-3 mb-12">
                    {['all', 'douane', 'sanitaire', 'transport'].map(f => (
                        <button key={f} onClick={() => setFilter(f)} className={`px-6 py-3 rounded-full text-sm font-bold transition-all flex items-center gap-2 border shadow-sm ${filter === f ? 'bg-blue-600 text-white border-blue-600 shadow-lg scale-105' : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50 hover:border-slate-300'}`}>
                            {f === 'all' ? 'Processus Complet' : f.charAt(0).toUpperCase() + f.slice(1)}
                        </button>
                    ))}
                </div>
            );

            const DetailedTimelineItem = ({ step, index }) => {
                const isLeft = index % 2 === 0;

                const TextContent = () => (
                    <div className={`flex flex-col justify-center ${isLeft ? 'items-end text-right pr-12' : 'items-start text-left pl-12'}`}>
                        <div className="text-xs font-bold text-slate-400 uppercase tracking-widest mb-2 flex items-center gap-2">
                            {isLeft ? <>{step.time} <i className="fa-regular fa-clock"></i></> : <><i className="fa-regular fa-clock"></i> {step.time}</>}
                        </div>
                        <h3 className="text-2xl font-bold text-slate-800 mb-2 group-hover:text-blue-600 transition-colors">
                            <TextWithGlossaryLinks text={step.title} onNavigate={onNavigateGlossary} />
                        </h3>
                        <p className="text-sm text-slate-500 leading-relaxed max-w-sm font-medium">
                            <TextWithGlossaryLinks text={step.details} onNavigate={onNavigateGlossary} />
                        </p>
                        <button className="mt-4 text-xs font-bold bg-blue-50 text-blue-600 px-4 py-2 rounded-full border border-blue-100 group-hover:bg-blue-600 group-hover:text-white transition-all flex items-center gap-2">
                            Voir l'analyse juridique <i className="fa-solid fa-arrow-right"></i>
                        </button>
                    </div>
                );

                const CardContent = () => (
                    <div className={`relative ${isLeft ? 'pl-12' : 'pr-12'} flex ${isLeft ? 'justify-start' : 'justify-end'}`}>
                        <div className="bg-white rounded-2xl border border-slate-200 shadow-sm p-6 w-full max-w-sm group-hover:shadow-lg group-hover:border-blue-300 group-hover:-translate-y-1 transition-all">
                            <div className="flex justify-between items-center mb-4 border-b border-slate-50 pb-3">
                                <span className="bg-slate-100 text-slate-600 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wide">{step.category}</span>
                                <div className="flex items-center gap-2">
                                    <div className="text-[10px] text-slate-400 font-bold uppercase text-right">Responsable</div>
                                    <div className="w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs"><i className="fa-solid fa-user"></i></div>
                                </div>
                            </div>
                            <div className="mb-3">
                                <div className="text-xs font-bold text-slate-400 uppercase mb-2">Documents Clés</div>
                                <div className="flex flex-wrap gap-2">
                                    {step.docs.map((doc, i) => (
                                        <span key={i} className="text-xs font-medium text-slate-600 bg-slate-50 px-2 py-1 rounded border border-slate-100 flex items-center">
                                            <i className="fa-regular fa-file-lines mr-1 text-slate-400"></i> 
                                            <TextWithGlossaryLinks text={doc} onNavigate={onNavigateGlossary} />
                                        </span>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                );

                return (
                    <div className="relative flex items-center justify-between w-full mb-16 md:mb-24 cursor-pointer group fade-in" onClick={() => setSelectedStep(step)}>
                        <div className="w-5/12">{isLeft ? <TextContent /> : <CardContent />}</div>
                        <div className="w-2/12 flex justify-center relative z-10">
                            <div className={`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold shadow-xl border-4 border-slate-50 transition-all duration-300 group-hover:scale-110 group-hover:bg-blue-600 group-hover:text-white ${step.warning ? 'bg-slate-800 text-white' : 'bg-slate-700 text-white'}`}>{index + 1}</div>
                        </div>
                        <div className="w-5/12">{isLeft ? <CardContent /> : <TextContent />}</div>
                    </div>
                );
            };

            return (
                <div className="animate-fade-in">
                    <div className="bg-slate-900 text-white py-12 px-4 shadow-xl text-center relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-full opacity-10 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-blue-400 via-slate-900 to-black"></div>
                        <div className="relative max-w-4xl mx-auto z-10">
                            <div className="inline-block mb-4 px-4 py-1 rounded-full bg-blue-600/30 border border-blue-500/50 text-blue-200 text-sm font-semibold">
                                Importation dans un Pays Tiers
                            </div>
                            <h1 className="text-3xl md:text-5xl font-bold mb-6 leading-tight">
                                Export Agroalimentaire<br/>
                                <span className="text-blue-400">UE <i className="fa-solid fa-arrow-right mx-2 text-2xl"></i> Royaume-Uni</span>
                            </h1>
                            <p className="text-slate-400 text-lg max-w-2xl mx-auto">
                                Séquençage détaillé des formalités depuis l'implémentation totale du Border Target Operating Model (<TextWithGlossaryLinks text="BTOM" onNavigate={onNavigateGlossary} />) et du système <TextWithGlossaryLinks text="IPAFFS" onNavigate={onNavigateGlossary} />.
                            </p>
                        </div>
                    </div>
                    
                    <div className="w-full bg-white border-b border-slate-200 py-12 shadow-sm relative overflow-hidden">
                        <div className="max-w-6xl mx-auto px-4">
                            <div className="text-center mb-10">
                                <h2 className="text-3xl font-bold text-slate-800 flex items-center justify-center gap-3">
                                    <i className="fa-solid fa-chart-simple text-blue-600"></i> Probabilité de Contrôle Physique en Douane (BCP)
                                </h2>
                                <p className="text-slate-500 mt-2">Corrélation entre la classification BTOM des denrées alimentaires et le risque d'inspection aux frontières</p>
                            </div>
                            <div className="flex items-end justify-center h-80 gap-4 md:gap-16 relative">
                                <div className="absolute inset-0 w-full h-full pointer-events-none flex flex-col justify-between text-xs text-slate-300 z-0 px-4 md:px-20">
                                    <div className="border-b border-dashed border-slate-200 w-full h-0 flex items-center"><span className="-ml-10 font-bold">100%</span></div>
                                    <div className="border-b border-dashed border-slate-200 w-full h-0 flex items-center"><span className="-ml-10 font-bold">50%</span></div>
                                    <div className="border-b border-dashed border-slate-200 w-full h-0 flex items-center"><span className="-ml-10 font-bold">0%</span></div>
                                </div>
                                <div className="relative z-10 flex flex-col items-center group w-1/4 md:w-32 h-full justify-end">
                                    <div className="w-full md:w-24 bg-green-500 rounded-t-xl shadow-lg relative hover:brightness-110 transition-all duration-1000 ease-out cursor-pointer" style={{ height: mounted ? '5%' : '0%' }}>
                                        <div className="absolute -top-10 left-1/2 -translate-x-1/2 bg-green-100 text-green-800 text-sm font-bold px-3 py-1 rounded shadow-sm opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-green-200">~1% (Documentaire)</div>
                                    </div>
                                    <div className="mt-4 text-center"><span className="block text-lg font-bold text-slate-700">Risque faible</span></div>
                                </div>
                                <div className="relative z-10 flex flex-col items-center group w-1/4 md:w-32 h-full justify-end">
                                    <div className="w-full md:w-24 bg-gradient-to-t from-yellow-500 to-yellow-300 rounded-t-xl shadow-lg relative hover:brightness-110 transition-all duration-1000 ease-out cursor-pointer" style={{ height: mounted ? '30%' : '0%' }}>
                                        <div className="absolute inset-0 opacity-10 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAIklEQVQIW2NkQAKrVq36zwjjgzjwqgOx4Wy4xF27dt0HAGKTE/wtviPNAAAAAElFTkSuQmCC')]"></div>
                                        <div className="absolute -top-10 left-1/2 -translate-x-1/2 bg-yellow-100 text-yellow-800 text-sm font-bold px-3 py-1 rounded shadow-sm opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-yellow-200">1% à 30% (Aléatoire)</div>
                                    </div>
                                    <div className="mt-4 text-center"><span className="block text-lg font-bold text-slate-700">Risque moyen</span></div>
                                </div>
                                <div className="relative z-10 flex flex-col items-center group w-1/4 md:w-32 h-full justify-end">
                                    <div className="w-full md:w-24 bg-red-600 rounded-t-xl shadow-lg relative hover:brightness-110 transition-all duration-1000 ease-out cursor-pointer" style={{ height: mounted ? '90%' : '0%' }}>
                                        <div className="absolute -top-10 left-1/2 -translate-x-1/2 bg-red-100 text-red-800 text-sm font-bold px-3 py-1 rounded shadow-sm opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-red-200">100% (Systématique)</div>
                                    </div>
                                    <div className="mt-4 text-center"><span className="block text-lg font-bold text-slate-700">Risque élevé</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div className="max-w-6xl mx-auto px-4 mt-16 mb-20">
                        <div className="grid md:grid-cols-3 gap-6">
                            {ukBtomLevels.map((level, idx) => {
                                const colors = { green: "bg-green-50 border-green-500 text-green-700", yellow: "bg-yellow-50 border-yellow-500 text-yellow-700", red: "bg-red-50 border-red-500 text-red-700" };
                                const iconColors = { green: "bg-green-100 text-green-600", yellow: "bg-yellow-100 text-yellow-600", red: "bg-red-100 text-red-600" };
                                return (
                                    <div key={idx} className={`bg-white rounded-xl p-6 shadow-sm border-t-4 ${colors[level.color].split(' ')[1]} hover:shadow-lg transition-shadow`}>
                                        <div className="flex items-center gap-4 mb-4">
                                            <div className={`w-12 h-12 rounded-full flex items-center justify-center ${iconColors[level.color]} text-xl`}><i className={`fa-solid ${level.icon}`}></i></div>
                                            <h3 className="font-bold text-lg text-slate-800">{level.level}</h3>
                                        </div>
                                        <div className="text-sm text-slate-600 mb-4 h-12 font-medium">{level.products}</div>
                                        <ul className="space-y-2 mb-4">
                                            {level.requirements.map((req, i) => (
                                                <li key={i} className="flex items-start gap-2 text-sm text-slate-500">
                                                    <i className={`fa-solid fa-check mt-1 ${colors[level.color].split(' ')[2]}`}></i>
                                                    <TextWithGlossaryLinks text={req} onNavigate={onNavigateGlossary} />
                                                </li>
                                            ))}
                                        </ul>
                                        <div className={`text-xs font-bold px-3 py-2 rounded ${colors[level.color]}`}>{level.change}</div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                    
                    <main className="max-w-6xl mx-auto px-4 mb-20">
                        <div className="text-center mb-10">
                            <h2 className="text-4xl font-bold text-slate-800 mb-4">Séquençage du Flux Documentaire</h2>
                            <p className="text-slate-500 text-lg max-w-2xl mx-auto mb-8">La chronologie opérationnelle stricte pour exporter vers la Grande-Bretagne. Cliquez sur les termes violets ou les cartes pour les analyses juridiques.</p>
                            <FilterBar />
                        </div>
                        <div className="relative py-8 min-h-[500px]">
                            <div className="timeline-line-center hidden md:block"></div>
                            <div className="hidden md:block">
                                {filteredData.length > 0 ? (
                                    filteredData.map((step, index) => (
                                        <DetailedTimelineItem key={step.id} step={step} index={index} />
                                    ))
                                ) : (<div className="text-center py-20 text-slate-400 italic">Aucune étape ne correspond à ce filtre.</div>)}
                            </div>
                            
                            {/* Version Mobile */}
                            <div className="md:hidden space-y-8 pl-6 border-l-2 border-slate-200 ml-4">
                                {filteredData.map((step, index) => (
                                    <div key={step.id} className="relative cursor-pointer" onClick={() => setSelectedStep(step)}>
                                        <div className="absolute -left-[31px] top-0 w-8 h-8 rounded-full bg-slate-700 text-white flex items-center justify-center text-sm font-bold border-4 border-slate-50">{index + 1}</div>
                                        <div className="text-xs font-bold text-slate-400 uppercase mb-1">{step.time}</div>
                                        <h3 className="text-xl font-bold text-slate-800 mb-2">{step.title}</h3>
                                        <div className="bg-white p-4 rounded-lg shadow-sm border border-slate-200">
                                            <div className="text-blue-600 text-sm font-bold mb-2">Voir l'analyse juridique <i className="fa-solid fa-arrow-right ml-1"></i></div>
                                            <div className="text-xs text-slate-500">{step.details}</div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        // --- PAGE 2: EUROPE / MARCHE UNIQUE ---
        const EuropePage = ({ setSelectedStep, onNavigateGlossary }) => {
            return (
                <div className="animate-fade-in pb-20">
                    <div className="bg-slate-800 text-white py-12 px-4 shadow-xl text-center relative overflow-hidden mb-16">
                        <div className="absolute top-0 left-0 w-full h-full opacity-10 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-emerald-400 via-blue-900 to-black"></div>
                        <div className="relative max-w-4xl mx-auto z-10">
                            <div className="inline-block mb-4 px-4 py-1 rounded-full bg-emerald-400/20 border border-emerald-400/50 text-emerald-200 text-sm font-semibold">Distinction Fondamentale à l'Export</div>
                            <h1 className="text-3xl md:text-5xl font-bold mb-6">Marché Unique vs Pays Tiers</h1>
                            <p className="text-slate-300 text-lg max-w-2xl mx-auto">La différence cruciale entre l'Union Douanière de l'UE (libre circulation des marchandises) et l'AELE (États européens avec frontières douanières).</p>
                        </div>
                    </div>
                    
                    <div className="max-w-6xl mx-auto px-4">
                        <div className="grid md:grid-cols-2 gap-8 mb-16">
                            <div className="bg-blue-50 border-l-4 border-blue-600 p-6 rounded-r-xl shadow-sm">
                                <h3 className="text-xl font-bold text-blue-900 mb-2"><i className="fa-solid fa-star text-yellow-500 mr-2"></i> Zone A : Union Douanière & Marché Unique</h3>
                                <p className="text-blue-800 text-sm mb-4 font-semibold">Les 27 États de l'UE (Allemagne, Italie, Espagne...)</p>
                                <ul className="space-y-2 text-sm text-blue-700">
                                    <li><i className="fa-solid fa-check mr-2"></i> Libre circulation totale des marchandises</li>
                                    <li><i className="fa-solid fa-check mr-2"></i> Aucune douane, aucun droit à payer</li>
                                    <li><i className="fa-solid fa-check mr-2"></i> Reconnaissance mutuelle des normes (<TextWithGlossaryLinks text="HACCP" onNavigate={onNavigateGlossary} />)</li>
                                </ul>
                            </div>
                            <div className="bg-slate-100 border-l-4 border-slate-600 p-6 rounded-r-xl shadow-sm">
                                <h3 className="text-xl font-bold text-slate-900 mb-2"><i className="fa-solid fa-mountain text-slate-500 mr-2"></i> Zone B : AELE (Pays Tiers européens)</h3>
                                <p className="text-slate-800 text-sm mb-4 font-semibold">Suisse, Norvège, Islande, Liechtenstein</p>
                                <ul className="space-y-2 text-sm text-slate-700">
                                    <li><i className="fa-solid fa-xmark mr-2 text-red-500"></i> Ces pays sont dans l'espace Schengen pour les voyageurs, PAS pour les marchandises !</li>
                                    <li><i className="fa-solid fa-file-contract mr-2"></i> Dédouanement complet (<TextWithGlossaryLinks text="DAE" onNavigate={onNavigateGlossary} />) obligatoire</li>
                                    <li><i className="fa-solid fa-coins mr-2"></i> Droits de douane applicables à l'importation</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div className="grid md:grid-cols-2 lg:grid-cols-2 gap-8">
                            {europeData.map((item, idx) => (
                                <div key={idx} onClick={() => setSelectedStep(item)} className="bg-white rounded-2xl shadow-sm border border-slate-200 p-8 hover:shadow-xl hover:border-blue-400 hover:-translate-y-2 transition-all cursor-pointer group flex flex-col h-full">
                                    <div className="flex justify-between items-start mb-4">
                                        <div className={`w-14 h-14 rounded-full flex items-center justify-center text-2xl ${item.type === 'ue' ? 'bg-blue-100 text-blue-600' : 'bg-slate-100 text-slate-600'}`}><i className={`fa-solid ${item.icon}`}></i></div>
                                        <span className={`text-xs font-bold px-3 py-1 rounded-full uppercase ${item.type === 'ue' ? 'bg-blue-50 text-blue-600' : 'bg-slate-100 text-slate-600'}`}>{item.category}</span>
                                    </div>
                                    <h3 className="font-bold text-2xl text-slate-800 mb-3 group-hover:text-blue-600 transition-colors">
                                        <TextWithGlossaryLinks text={item.title} onNavigate={onNavigateGlossary} />
                                    </h3>
                                    <p className="text-slate-600 mb-6 flex-grow leading-relaxed">
                                        <TextWithGlossaryLinks text={item.details} onNavigate={onNavigateGlossary} />
                                    </p>
                                    <div className="mt-auto w-full bg-slate-50 border border-slate-200 text-center py-3 rounded-lg text-sm font-bold text-slate-600 group-hover:bg-blue-600 group-hover:text-white group-hover:border-blue-600 transition-all shadow-sm flex items-center justify-center gap-2">
                                        Voir l'analyse détaillée <i className="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // --- PAGE 3: STRATÉGIE ---
        const StrategyPage = () => (
            <div className="animate-fade-in pb-20">
                <div className="bg-slate-900 text-white py-12 px-4 shadow-xl text-center relative overflow-hidden mb-12">
                    <div className="absolute top-0 left-0 w-full h-full opacity-10 bg-[radial-gradient(circle_at_bottom_right,_var(--tw-gradient-stops))] from-amber-500 via-slate-900 to-black"></div>
                    <div className="relative max-w-4xl mx-auto z-10">
                        <div className="inline-block mb-4 px-4 py-1 rounded-full bg-amber-500/20 border border-amber-500/50 text-amber-200 text-sm font-semibold">
                            Analyse Comparative pour Bo'Nature
                        </div>
                        <h1 className="text-3xl md:text-5xl font-bold mb-6 leading-tight">
                            Synthèse & Recommandations<br/>
                            <span className="text-amber-500">Stratégie Export</span>
                        </h1>
                        <p className="text-slate-300 text-lg max-w-2xl mx-auto">
                            Matrice d'aide à la décision réglementaire pour arbitrer les axes de développement commercial à l'international.
                        </p>
                    </div>
                </div>
                
                <div className="max-w-6xl mx-auto px-4">
                    <div className="overflow-x-auto bg-white rounded-xl shadow-sm border border-slate-200 mb-12">
                        <table className="w-full text-left border-collapse">
                            <thead>
                                <tr className="bg-slate-50 border-b border-slate-200 text-slate-600 text-sm uppercase">
                                    <th className="p-4">Marché Cible</th>
                                    <th className="p-4">Complexité Douanière</th>
                                    <th className="p-4">Coûts Administratifs</th>
                                    <th className="p-4">Délais Frontières</th>
                                    <th className="p-4">Avantages Commerciaux</th>
                                    <th className="p-4">Contraintes Réglementaires</th>
                                </tr>
                            </thead>
                            <tbody className="text-sm">
                                {strategyData.map((row, idx) => (
                                    <tr key={idx} className="border-b border-slate-100 hover:bg-slate-50">
                                        <td className="p-4 font-bold text-slate-800">{row.zone}<br/><span className="text-xs font-normal text-slate-500">{row.countries}</span></td>
                                        <td className="p-4"><span className={`px-2 py-1 rounded text-xs font-bold ${row.color === 'green' ? 'bg-green-100 text-green-700' : row.color === 'yellow' ? 'bg-yellow-100 text-yellow-700' : 'bg-red-100 text-red-700'}`}>{row.difficulty}</span></td>
                                        <td className="p-4 font-medium text-slate-600">{row.cost}</td>
                                        <td className="p-4 text-slate-600">{row.time}</td>
                                        <td className="p-4 text-green-700"><ul className="list-disc pl-4 space-y-1">{row.pros.map(p => <li key={p}>{p}</li>)}</ul></td>
                                        <td className="p-4 text-red-600"><ul className="list-disc pl-4 space-y-1">{row.cons.map(c => <li key={c}>{c}</li>)}</ul></td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                    
                    <div className="bg-white rounded-2xl p-8 border border-slate-200 shadow-lg">
                        <h3 className="text-2xl font-bold text-slate-800 mb-8 text-center">Plan d'Action Séquentiel Recommandé pour la Startup</h3>
                        <div className="grid md:grid-cols-3 gap-8">
                            <div className="p-6 bg-slate-50 rounded-xl border border-slate-100 shadow-sm relative overflow-hidden group">
                                <div className="absolute top-0 left-0 w-1 h-full bg-green-500"></div>
                                <div className="text-center mb-4">
                                    <div className="w-12 h-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto text-xl font-bold">1</div>
                                </div>
                                <h4 className="font-bold text-center text-slate-800 mb-3 text-lg">Pénétration du Marché Unique (UE)</h4>
                                <p className="text-sm text-slate-600 text-justify leading-relaxed">Privilégier une expansion initiale vers les pays membres de l'Union Douanière (ex: Allemagne, Italie). L'absence de barrières douanières et la reconnaissance mutuelle des normes sanitaires (HACCP) permettent une commercialisation fluide et sans frais cachés. C'est la phase idéale pour tester le produit à l'international à moindre risque.</p>
                            </div>
                            
                            <div className="p-6 bg-slate-50 rounded-xl border border-slate-100 shadow-sm relative overflow-hidden">
                                <div className="absolute top-0 left-0 w-1 h-full bg-yellow-500"></div>
                                <div className="text-center mb-4">
                                    <div className="w-12 h-12 bg-yellow-100 text-yellow-600 rounded-full flex items-center justify-center mx-auto text-xl font-bold">2</div>
                                </div>
                                <h4 className="font-bold text-center text-slate-800 mb-3 text-lg">Déploiement Stratégique (Suisse)</h4>
                                <p className="text-sm text-slate-600 text-justify leading-relaxed">Dans un second temps, exploiter le marché suisse. Bien que nécessitant l'assimilation des formalités douanières d'exportation (DAE), le marché est géographiquement proche et offre un pouvoir d'achat supérieur. Cet investissement administratif préparera l'entreprise aux exigences douanières des autres Pays Tiers.</p>
                            </div>
                            
                            <div className="p-6 bg-slate-50 rounded-xl border border-slate-100 shadow-sm relative overflow-hidden">
                                <div className="absolute top-0 left-0 w-1 h-full bg-red-500"></div>
                                <div className="text-center mb-4">
                                    <div className="w-12 h-12 bg-red-100 text-red-600 rounded-full flex items-center justify-center mx-auto text-xl font-bold">3</div>
                                </div>
                                <h4 className="font-bold text-center text-slate-800 mb-3 text-lg">Massification UK Post-Brexit</h4>
                                <p className="text-sm text-slate-600 text-justify leading-relaxed">Repousser l'entrée sur le marché britannique ou privilégier un modèle de distribution B2B unique. Les contraintes du modèle BTOM génèrent des coûts vétérinaires (EHC) et administratifs élevés par expédition. L'envoi de "petits colis" (B2C) vers le Royaume-Uni n'est plus rentable ; une massification des flux (envoi par palettes complètes) est devenue indispensable.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        );

        // --- PAGE 4: GLOSSAIRE ---
        const GlossaryPage = ({ searchQuery }) => {
            const [searchTerm, setSearchTerm] = useState('');

            useEffect(() => {
                if (searchQuery) {
                    setSearchTerm(searchQuery);
                    window.scrollTo(0, 0);
                }
            }, [searchQuery]);

            const filteredGlossary = glossaryData
                .sort((a, b) => a.term.localeCompare(b.term))
                .filter(item => 
                    item.term.toLowerCase().includes(searchTerm.toLowerCase()) || 
                    item.fullName.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    item.definition.toLowerCase().includes(searchTerm.toLowerCase())
                );

            const colorClasses = { blue: "bg-blue-50 text-blue-600 border-blue-200", green: "bg-green-50 text-green-600 border-green-200", red: "bg-red-50 text-red-600 border-red-200", amber: "bg-amber-50 text-amber-600 border-amber-200", slate: "bg-slate-100 text-slate-600 border-slate-200" };
            const iconBgClasses = { blue: "bg-blue-100 text-blue-600", green: "bg-green-100 text-green-600", red: "bg-red-100 text-red-600", amber: "bg-amber-100 text-amber-600", slate: "bg-slate-200 text-slate-600" };

            return (
                <div className="animate-fade-in pb-20">
                    <div className="bg-slate-900 text-white py-12 px-4 shadow-xl text-center relative overflow-hidden mb-12">
                        <div className="absolute top-0 left-0 w-full h-full opacity-10 bg-[radial-gradient(circle_at_top_left,_var(--tw-gradient-stops))] from-purple-500 via-slate-900 to-black"></div>
                        <div className="relative max-w-4xl mx-auto z-10">
                            <div className="inline-block mb-4 px-4 py-1 rounded-full bg-purple-500/20 border border-purple-500/50 text-purple-200 text-sm font-semibold">Lexique & Définitions Techniques</div>
                            <h1 className="text-3xl md:text-5xl font-bold mb-8">Le <span className="text-purple-400">Glossaire</span> de l'Exportateur</h1>
                            <div className="relative max-w-lg mx-auto">
                                <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"><i className="fa-solid fa-magnifying-glass text-slate-400"></i></div>
                                <input type="text" placeholder="Rechercher un terme (ex: EORI, IPAFFS)..." value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} className="w-full pl-11 pr-4 py-4 rounded-full bg-white/10 border border-white/20 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:bg-white/20 transition-all shadow-inner backdrop-blur-sm" />
                                {searchTerm && (
                                    <button onClick={() => setSearchTerm('')} className="absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-white transition-colors"><i className="fa-solid fa-xmark"></i></button>
                                )}
                            </div>
                        </div>
                    </div>

                    <div className="max-w-6xl mx-auto px-4">
                        {filteredGlossary.length === 0 ? (
                            <div className="text-center py-20 bg-white rounded-2xl border border-slate-200 shadow-sm"><i className="fa-solid fa-ghost text-4xl text-slate-300 mb-4"></i><h3 className="text-xl font-bold text-slate-700">Aucun terme trouvé</h3></div>
                        ) : (
                            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {filteredGlossary.map((item, idx) => (
                                    <div key={idx} className="bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-lg hover:-translate-y-1 hover:border-purple-300 transition-all group flex flex-col h-full">
                                        <div className="flex justify-between items-start mb-4">
                                            <div className={`w-12 h-12 rounded-xl flex items-center justify-center text-xl shadow-sm ${iconBgClasses[item.color]}`}><i className={`fa-solid ${item.icon}`}></i></div>
                                            <span className={`text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wide border ${colorClasses[item.color]}`}>{item.category}</span>
                                        </div>
                                        <h3 className="font-bold text-xl text-slate-800 mb-1">{item.term}</h3>
                                        <div className="text-xs font-semibold text-slate-400 uppercase tracking-wide mb-4 min-h-[2rem]">{item.fullName}</div>
                                        <p className="text-sm text-slate-600 leading-relaxed flex-grow">{item.definition}</p>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // ==========================================
        // APP PRINCIPALE
        // ==========================================
        const App = () => {
            const [activeTab, setActiveTab] = useState('home');
            const [selectedStep, setSelectedStep] = useState(null);
            const [glossarySearchQuery, setGlossarySearchQuery] = useState('');

            const handleNavigateGlossary = (term) => {
                setGlossarySearchQuery(term);
                setActiveTab('glossary');
                setSelectedStep(null);
            };

            const handleTabChange = (tab, resetSearch = false) => {
                setActiveTab(tab);
                if (resetSearch) setGlossarySearchQuery('');
            };

            return (
                <div className="min-h-screen pb-20 font-sans bg-slate-50">
                    <Navigation activeTab={activeTab} setTab={handleTabChange} />
                    
                    {activeTab === 'home' && <HomePage setTab={handleTabChange} />}
                    {activeTab === 'europe' && <EuropePage setSelectedStep={setSelectedStep} onNavigateGlossary={handleNavigateGlossary} />}
                    {activeTab === 'uk' && <UKPage setSelectedStep={setSelectedStep} onNavigateGlossary={handleNavigateGlossary} />}
                    {activeTab === 'strategy' && <StrategyPage />}
                    {activeTab === 'glossary' && <GlossaryPage searchQuery={glossarySearchQuery} />}
                    
                    <footer className="bg-slate-900 text-slate-400 mt-0 py-12 text-center border-t border-slate-800">
                        <div className="max-w-4xl mx-auto px-4"><p className="font-bold text-white mb-2">Référentiel Stratégique & Réglementaire 2026</p><p className="text-sm">Projet Étudiant - Analyse Export Bo'Nature</p></div>
                    </footer>
                    
                    <Modal data={selectedStep} onClose={() => setSelectedStep(null)} onNavigateGlossary={handleNavigateGlossary} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
